{% extends 'base.html.twig' %}


{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="{{ asset('css/team_view.css') }}"/>

{% endblock %}

{% block body %}

    <div class="row">
        <div class="col-md-12 text-center">
            <h1>{{ team.name }}</h1>
        </div>
    </div>

    <div class="row last-match lost">
        <div class="col-md-12 text-center">
            <h1>{{ team.lastPlayedMatch.name }}</h1>
        </div>
    </div>

    <div class="row">
        <div class="col-md-6">
            <h2>Matchs Joués</h2>
            <table class="table table-bordered played-matches">
                <tbody>
                {% for match in team.playedMatchOrdered %}
                    {% if match.tie %}
                        {% set class = "tie" %}
                    {% elseif match.winner == team %}
                        {% set class = "win" %}
                    {% else %}
                        {% set class = "loose" %}
                    {% endif %}
                    <tr class="played-match-row {{ class }}" data-id="{{ match.id }}">
                       <td class="played-match-result">{{ match.name }} -  {% if match.tie %}Egalité{% else %}Gagnant: {{ match.winner.name }}{% endif %}</td>
                    </tr>
                {% endfor %}
                </tbody>

            </table>

        </div>
        <div class="col-md-6">
            <h1>{{ team.name }}</h1>
        </div>
    </div>


{% endblock %}


{% block javascripts %}
    {{ parent() }}

    <script>
        $(function(){
           $('.played-match-row').on('click',function(e){
               var matchId = $(e.target).parents('.played-match-row').data('id');
               window.location = '{{ url('view_match',{"matchId": '__matchId__'}) }}'.replace('__matchId__',matchId);
           });
        });
    </script>

{% endblock %}
